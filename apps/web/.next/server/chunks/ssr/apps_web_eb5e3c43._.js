module.exports=[27707,a=>{"use strict";var b=a.i(73220);async function c(a,d={}){let{params:e,...f}=d,g=`http://localhost:3001${a}`;if(e){let a=new URLSearchParams;Object.entries(e).forEach(([b,c])=>{a.append(b,String(c))}),g+=`?${a.toString()}`}let h={"Content-Type":"application/json"};f.headers&&"object"==typeof f.headers&&Object.assign(h,f.headers);let i=(0,b.getToken)();i&&(h.Authorization=`Bearer ${i}`);let j=await fetch(g,{...f,headers:h});if(!j.ok)throw Error((await j.json().catch(()=>({}))).message||`API error: ${j.statusText}`);let k=j.headers.get("content-type");return k?.includes("application/json")?j.json():j}async function d(a,b){return c(a,{...b,method:"GET"})}async function e(a,b,d){return c(a,{...d,method:"PATCH",body:b?JSON.stringify(b):void 0})}async function f(a,b){return c(a,{...b,method:"DELETE"})}a.s(["del",()=>f,"get",()=>d,"patch",()=>e])},71211,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(50944),e=a.i(72131),f=a.i(60100),g=a.i(27707),h=a.i(83497),i=a.i(4720),j=a.i(60246),k=a.i(96101),l=a.i(90669),m=a.i(3314),n=a.i(70106);let o=(0,n.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),p=(0,n.default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var q=a.i(20005);function r(){let a=(0,d.useRouter)(),{user:n,isLoading:r,isLoggedIn:t,logout:u}=(0,f.useAuth)(),[v,w]=(0,e.useState)({users:0,admins:0,superAdmins:0}),[x,y]=(0,e.useState)(!0),[z,A]=(0,e.useState)(null);(0,e.useEffect)(()=>{if(!r){if(!t||!n)return void a.push("/auth/signin");B()}},[r,t,n,a]);let B=async()=>{try{y(!0),A(null);let a=await g.get("/users"),b=Array.isArray(a)?a:a.data||[],c=b.filter(a=>"USER"===a.role).length,d=b.filter(a=>"ADMIN"===a.role).length,e=b.filter(a=>"SUPER_ADMIN"===a.role).length;w({users:c,admins:d,superAdmins:e})}catch(a){console.error("Erreur chargement stats:",a),A(a instanceof Error?a.message:"Erreur lors du chargement des statistiques"),y(!1)}finally{y(!1)}},C=async()=>{await u()},D=[{title:"Gestion de Produits",description:"Catalogue, prix, inventaire et catégories",icon:h.Package,href:"/admin/products",color:"from-blue-500 to-cyan-500",stats:"0 produits"},{title:"Gestion de Blog",description:"Articles, révisions, SEO et publication",icon:i.FileText,href:"/admin/blog",color:"from-purple-500 to-pink-500",stats:"0 articles"},{title:"Médiathèque",description:"Upload, organisation et optimisation",icon:k.FolderOpen,href:"/admin/media",color:"from-green-500 to-emerald-500",stats:"0 fichiers"},{title:"Utilisateurs",description:"Gestion des rôles et permissions",icon:j.Users,href:"/admin/users",color:"from-orange-500 to-red-500",stats:`${v.users+v.admins+v.superAdmins} utilisateurs`,disabled:!1},{title:"Monitoring",description:"Analytics, IPs bloquées, Cloudflare",icon:l.Activity,href:"/admin/monitoring",color:"from-yellow-500 to-orange-500",stats:"Actif"},{title:"Sécurité & IA",description:"Configuration 2FA, rate limiting, AI",icon:m.Shield,href:"/admin/security",color:"from-red-500 to-rose-500",stats:"Configuré"},{title:"Éditeur de Texte",description:"Test de l'éditeur WYSIWYG",icon:o,href:"/admin/editor-test",color:"from-indigo-500 to-purple-500",stats:"Disponible"},{title:"Gestion des Prix",description:"Multi-devises et réductions",icon:p,href:"/admin/pricing",color:"from-teal-500 to-cyan-500",stats:"0 règles"}];return r||x?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Chargement du dashboard..."})]})}):n?(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Dashboard Admin"}),(0,b.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Bienvenue ",n.name," (",n.email,")"]})]}),(0,b.jsxs)("button",{onClick:C,className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:[(0,b.jsx)(q.LogOut,{className:"w-4 h-4"}),"Déconnexion"]})]}),z&&(0,b.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:(0,b.jsxs)("p",{className:"text-red-700 dark:text-red-300 text-sm",children:["⚠️ ",z]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsx)(s,{title:"Utilisateurs",value:v.users.toString(),change:"+0%"}),(0,b.jsx)(s,{title:"Admins",value:v.admins.toString(),change:"+0%"}),(0,b.jsx)(s,{title:"Super Admins",value:v.superAdmins.toString(),change:"+0%"}),(0,b.jsx)(s,{title:"Total",value:(v.users+v.admins+v.superAdmins).toString(),change:"+0%"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Modules Disponibles"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map(a=>{let d=a.icon;return a.disabled?(0,b.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 opacity-50 cursor-not-allowed",children:[(0,b.jsx)("div",{className:`w-12 h-12 bg-gradient-to-br ${a.color} rounded-lg flex items-center justify-center text-white mb-4`,children:(0,b.jsx)(d,{className:"w-6 h-6"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:a.title}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:a.description}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:a.stats}),(0,b.jsx)("span",{className:"text-gray-400 text-sm font-medium",children:"Accès restreint"})]})]},a.title):(0,b.jsxs)(c.default,{href:a.href,className:"group relative bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[(0,b.jsx)("div",{className:`w-12 h-12 bg-gradient-to-br ${a.color} rounded-lg flex items-center justify-center text-white mb-4 group-hover:scale-110 transition-transform`,children:(0,b.jsx)(d,{className:"w-6 h-6"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:a.title}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:a.description}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:a.stats}),(0,b.jsx)("span",{className:"text-blue-600 dark:text-blue-400 text-sm font-medium group-hover:translate-x-1 transition-transform",children:"Ouvrir →"})]})]},a.title)})})]})]}):null}function s({title:a,value:c,change:d}){let e=d.startsWith("+");return(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:a}),(0,b.jsxs)("div",{className:"flex items-end justify-between",children:[(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:c}),(0,b.jsx)("span",{className:`text-sm font-medium ${e?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d})]})]})}a.s(["default",()=>r],71211)}];

//# sourceMappingURL=apps_web_eb5e3c43._.js.map