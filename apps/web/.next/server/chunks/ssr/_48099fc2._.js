module.exports=[15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],81560)},27707,a=>{"use strict";var b=a.i(73220);async function c(a,d={}){let{params:e,...f}=d,g=`http://localhost:3001${a}`;if(e){let a=new URLSearchParams;Object.entries(e).forEach(([b,c])=>{a.append(b,String(c))}),g+=`?${a.toString()}`}let h={"Content-Type":"application/json"};f.headers&&"object"==typeof f.headers&&Object.assign(h,f.headers);let i=(0,b.getToken)();i&&(h.Authorization=`Bearer ${i}`);let j=await fetch(g,{...f,headers:h});if(!j.ok)throw Error((await j.json().catch(()=>({}))).message||`API error: ${j.statusText}`);let k=j.headers.get("content-type");return k?.includes("application/json")?j.json():j}async function d(a,b){return c(a,{...b,method:"GET"})}async function e(a,b,d){return c(a,{...d,method:"PATCH",body:b?JSON.stringify(b):void 0})}async function f(a,b){return c(a,{...b,method:"DELETE"})}a.s(["del",()=>f,"get",()=>d,"patch",()=>e])},82381,a=>{"use strict";var b=a.i(87924),c=a.i(50944),d=a.i(72131),e=a.i(60100),f=a.i(27707),g=a.i(60246),h=a.i(15618),i=a.i(81560);function j(){let a=(0,c.useRouter)(),{user:j,isLoading:k}=(0,e.useAuth)(),[l,m]=(0,d.useState)([]),[n,o]=(0,d.useState)(!0),[p,q]=(0,d.useState)(null),[r,s]=(0,d.useState)(null);(0,d.useEffect)(()=>{if(!k){if(!j)return void a.push("/auth/signin");t()}},[k,j,a]);let t=async()=>{try{o(!0),q(null);let a=await f.get("/users");m(Array.isArray(a)?a:a.data||[])}catch(b){let a=b instanceof Error?b.message:"Erreur lors de la récupération des utilisateurs";q(a),console.error(a)}finally{o(!1)}},u=async(a,b)=>{try{s(a),await f.patch(`/users/${a}`,{role:b}),await t()}catch(a){alert(a instanceof Error?a.message:"Erreur lors de la mise à jour")}finally{s(null)}},v=async(a,b)=>{if(confirm(`\xcates-vous s\xfbr de vouloir supprimer l'utilisateur ${b} ?`))try{await f.del(`/users/${a}`),await t()}catch(a){alert(a instanceof Error?a.message:"Erreur lors de la suppression")}};return k||n?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Chargement des utilisateurs..."})]})}):(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-red-500 rounded-lg flex items-center justify-center text-white",children:(0,b.jsx)(g.Users,{className:"w-6 h-6"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Gestion des utilisateurs"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Gérer les rôles et permissions"})]})]}),(0,b.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,b.jsx)(h.Plus,{className:"w-4 h-4"}),"Ajouter un utilisateur"]})]}),p&&(0,b.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:(0,b.jsxs)("p",{className:"text-red-700 dark:text-red-300",children:["⚠️ ",p]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Total utilisateurs"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:l.length})]}),(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Admins"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:l.filter(a=>"ADMIN"===a.role).length})]}),(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Super Admins"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:l.filter(a=>"SUPER_ADMIN"===a.role).length})]})]}),(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,b.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-900 dark:text-white uppercase tracking-wider",children:"Utilisateur"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-900 dark:text-white uppercase tracking-wider",children:"Email"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-900 dark:text-white uppercase tracking-wider",children:"Rôle"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-900 dark:text-white uppercase tracking-wider",children:"Créé le"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-900 dark:text-white uppercase tracking-wider",children:"Dernière connexion"}),(0,b.jsx)("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-900 dark:text-white uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:0===l.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center",children:(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Aucun utilisateur trouvé"})})}):l.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[a.image&&(0,b.jsx)("img",{src:a.image,alt:a.name||"User",className:"w-10 h-10 rounded-full object-cover"}),(0,b.jsx)("div",{children:(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.name||"Sans nom"})})]})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:a.email})}),(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,b.jsxs)("select",{value:a.role,onChange:b=>u(a.id,b.target.value),disabled:r===a.id||a.id===j?.id,className:"text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded px-3 py-1.5 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,b.jsx)("option",{value:"USER",children:"User"}),(0,b.jsx)("option",{value:"ADMIN",children:"Admin"}),(0,b.jsx)("option",{value:"SUPER_ADMIN",children:"Super Admin"})]}),r===a.id&&(0,b.jsx)("span",{className:"ml-2 text-xs text-gray-500 dark:text-gray-400",children:"Mise à jour..."})]}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:new Date(a.createdAt).toLocaleDateString("fr-FR")}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:a.lastLoginAt?new Date(a.lastLoginAt).toLocaleDateString("fr-FR"):"-"}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,b.jsxs)("button",{onClick:()=>v(a.id,a.email||"cet utilisateur"),disabled:a.id===j?.id,className:"inline-flex items-center gap-2 px-3 py-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,b.jsx)(i.Trash2,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline text-xs",children:"Supprimer"})]})})]},a.id))})]})})}),l.length>0&&(0,b.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:["Total: ",(0,b.jsx)("strong",{children:l.length})," utilisateur",l.length>1?"s":""]})]})}a.s(["default",()=>j])}];

//# sourceMappingURL=_48099fc2._.js.map