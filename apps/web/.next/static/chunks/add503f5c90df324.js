(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75254,e=>{"use strict";var t=e.i(71645);let r=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,t.forwardRef)(({color:e="currentColor",size:o=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:l,iconNode:c,...d},u)=>(0,t.createElement)("svg",{ref:u,...a,width:o,height:o,stroke:e,strokeWidth:s?24*Number(n)/Number(o):n,className:r("lucide",i),...d},[...c.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(l)?l:[l]])),n=(e,a)=>{let n=(0,t.forwardRef)(({className:n,...s},i)=>(0,t.createElement)(o,{ref:i,iconNode:a,className:r(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,n),...s}));return n.displayName=`${e}`,n};e.s(["default",()=>n],75254)},17160,e=>{"use strict";e.i(47167).default.env.GOOGLE_CLIENT_SECRET;let t="http://localhost:3001",r=`${window.location.origin}/auth/callback`;function a(){let e=new URLSearchParams({client_id:"636201463661-nismjvocv42huaj01ioeqlrgf88232u9.apps.googleusercontent.com",redirect_uri:r,response_type:"code",scope:"openid email profile",access_type:"offline",prompt:"consent"});return`https://accounts.google.com/o/oauth2/v2/auth?${e.toString()}`}async function o(e){let r=await fetch(`${t}/auth/oauth/callback`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e})});if(!r.ok)throw Error(`OAuth exchange failed: ${r.statusText}`);return r.json()}function n(){return localStorage.getItem("auth_token")}function s(e){localStorage.setItem("auth_token",e)}function i(){let e=localStorage.getItem("auth_user");return e?JSON.parse(e):null}function l(e){localStorage.setItem("auth_user",JSON.stringify(e))}function c(){return null!==n()}async function d(){localStorage.removeItem("auth_token");let e=i();e?.id&&await fetch(`${t}/auth/logout`,{method:"POST",headers:{Authorization:`Bearer ${n()}`}}).catch(()=>{}),localStorage.removeItem("auth_user")}e.s(["exchangeCodeForToken",()=>o,"getCurrentUser",()=>i,"getGoogleAuthURL",()=>a,"getToken",()=>n,"isAuthenticated",()=>c,"logout",()=>d,"setCurrentUser",()=>l,"setToken",()=>s])},18566,(e,t,r)=>{t.exports=e.r(76562)},13248,e=>{"use strict";let t=(0,e.i(75254).default)("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]);e.s(["Chrome",()=>t],13248)},66121,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),o=e.i(17160),n=e.i(13248);function s(){let e=(0,a.useRouter)(),[s,i]=(0,r.useState)(null),[l,c]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{(async()=>{try{let t=new URLSearchParams(window.location.search),r=t.get("code"),a=t.get("error");if(a)throw Error(`Google OAuth error: ${a}`);if(!r)throw Error("No authorization code received");let n=await (0,o.exchangeCodeForToken)(r);(0,o.setToken)(n.token),(0,o.setCurrentUser)(n.user),e.push("/admin")}catch(e){console.error("OAuth callback error:",e),i(e instanceof Error?e.message:"Authentication failed"),c(!1)}})()},[e]),s)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-purple-900 p-4",children:(0,t.jsx)("div",{className:"w-full max-w-md",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 border border-red-200 dark:border-red-700",children:[(0,t.jsx)("div",{className:"flex justify-center mb-6",children:(0,t.jsx)("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-2xl flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-3xl",children:"❌"})})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-center text-red-600 dark:text-red-400 mb-4",children:"Erreur d'authentification"}),(0,t.jsx)("p",{className:"text-center text-gray-600 dark:text-gray-400 mb-6",children:s}),(0,t.jsx)("a",{href:"/auth/signin",className:"block w-full text-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Réessayer"})]})})}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-purple-900 p-4",children:(0,t.jsx)("div",{className:"w-full max-w-md",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 border border-gray-200 dark:border-gray-700 text-center",children:[(0,t.jsx)("div",{className:"flex justify-center mb-6",children:(0,t.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center animate-pulse",children:(0,t.jsx)(n.Chrome,{className:"w-8 h-8 text-white"})})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:"Authentification en cours..."}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Veuillez patienter pendant que nous traitons votre connexion."}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-600 to-purple-600 animate-pulse"})})})]})})})}function i(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{children:"Chargement..."}),children:(0,t.jsx)(s,{})})}e.s(["default",()=>i])}]);