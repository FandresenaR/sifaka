(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78916,e=>{"use strict";var t=e.i(17160);async function r(e,s={}){let{params:i,...a}=s,n=`http://localhost:3001${e}`;if(i){let e=new URLSearchParams;Object.entries(i).forEach(([t,r])=>{e.append(t,String(r))}),n+=`?${e.toString()}`}let l={"Content-Type":"application/json"};a.headers&&"object"==typeof a.headers&&Object.assign(l,a.headers);let d=(0,t.getToken)();d&&(l.Authorization=`Bearer ${d}`);let o=await fetch(n,{...a,headers:l});if(!o.ok)throw Error((await o.json().catch(()=>({}))).message||`API error: ${o.statusText}`);let c=o.headers.get("content-type");return c?.includes("application/json")?o.json():o}async function s(e,t){return r(e,{...t,method:"GET"})}async function i(e,t,s){return r(e,{...s,method:"PATCH",body:t?JSON.stringify(t):void 0})}async function a(e,t){return r(e,{...t,method:"DELETE"})}e.s(["del",()=>a,"get",()=>s,"patch",()=>i])},48273,e=>{"use strict";var t=e.i(43476),r=e.i(22016),s=e.i(18566),i=e.i(71645),a=e.i(62324),n=e.i(78916),l=e.i(88844),d=e.i(78583),o=e.i(61911),c=e.i(75505),m=e.i(21218),x=e.i(98919),u=e.i(75254);let h=(0,u.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),g=(0,u.default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var p=e.i(92270);function f(){let e=(0,s.useRouter)(),{user:u,isLoading:f,isLoggedIn:y,logout:j}=(0,a.useAuth)(),[v,N]=(0,i.useState)({users:0,admins:0,superAdmins:0}),[k,w]=(0,i.useState)(!0),[A,S]=(0,i.useState)(null);(0,i.useEffect)(()=>{if(!f){if(!y||!u)return void e.push("/auth/signin");T()}},[f,y,u,e]);let T=async()=>{try{w(!0),S(null);let e=await n.get("/users"),t=Array.isArray(e)?e:e.data||[],r=t.filter(e=>"USER"===e.role).length,s=t.filter(e=>"ADMIN"===e.role).length,i=t.filter(e=>"SUPER_ADMIN"===e.role).length;N({users:r,admins:s,superAdmins:i})}catch(e){console.error("Erreur chargement stats:",e),S(e instanceof Error?e.message:"Erreur lors du chargement des statistiques"),w(!1)}finally{w(!1)}},E=async()=>{await j()},P=[{title:"Gestion de Produits",description:"Catalogue, prix, inventaire et catégories",icon:l.Package,href:"/admin/products",color:"from-blue-500 to-cyan-500",stats:"0 produits"},{title:"Gestion de Blog",description:"Articles, révisions, SEO et publication",icon:d.FileText,href:"/admin/blog",color:"from-purple-500 to-pink-500",stats:"0 articles"},{title:"Médiathèque",description:"Upload, organisation et optimisation",icon:c.FolderOpen,href:"/admin/media",color:"from-green-500 to-emerald-500",stats:"0 fichiers"},{title:"Utilisateurs",description:"Gestion des rôles et permissions",icon:o.Users,href:"/admin/users",color:"from-orange-500 to-red-500",stats:`${v.users+v.admins+v.superAdmins} utilisateurs`,disabled:!1},{title:"Monitoring",description:"Analytics, IPs bloquées, Cloudflare",icon:m.Activity,href:"/admin/monitoring",color:"from-yellow-500 to-orange-500",stats:"Actif"},{title:"Sécurité & IA",description:"Configuration 2FA, rate limiting, AI",icon:x.Shield,href:"/admin/security",color:"from-red-500 to-rose-500",stats:"Configuré"},{title:"Éditeur de Texte",description:"Test de l'éditeur WYSIWYG",icon:h,href:"/admin/editor-test",color:"from-indigo-500 to-purple-500",stats:"Disponible"},{title:"Gestion des Prix",description:"Multi-devises et réductions",icon:g,href:"/admin/pricing",color:"from-teal-500 to-cyan-500",stats:"0 règles"}];return f||k?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Chargement du dashboard..."})]})}):u?(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Dashboard Admin"}),(0,t.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Bienvenue ",u.name," (",u.email,")"]})]}),(0,t.jsxs)("button",{onClick:E,className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:[(0,t.jsx)(p.LogOut,{className:"w-4 h-4"}),"Déconnexion"]})]}),A&&(0,t.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:(0,t.jsxs)("p",{className:"text-red-700 dark:text-red-300 text-sm",children:["⚠️ ",A]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsx)(b,{title:"Utilisateurs",value:v.users.toString(),change:"+0%"}),(0,t.jsx)(b,{title:"Admins",value:v.admins.toString(),change:"+0%"}),(0,t.jsx)(b,{title:"Super Admins",value:v.superAdmins.toString(),change:"+0%"}),(0,t.jsx)(b,{title:"Total",value:(v.users+v.admins+v.superAdmins).toString(),change:"+0%"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Modules Disponibles"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map(e=>{let s=e.icon;return e.disabled?(0,t.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 opacity-50 cursor-not-allowed",children:[(0,t.jsx)("div",{className:`w-12 h-12 bg-gradient-to-br ${e.color} rounded-lg flex items-center justify-center text-white mb-4`,children:(0,t.jsx)(s,{className:"w-6 h-6"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:e.stats}),(0,t.jsx)("span",{className:"text-gray-400 text-sm font-medium",children:"Accès restreint"})]})]},e.title):(0,t.jsxs)(r.default,{href:e.href,className:"group relative bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[(0,t.jsx)("div",{className:`w-12 h-12 bg-gradient-to-br ${e.color} rounded-lg flex items-center justify-center text-white mb-4 group-hover:scale-110 transition-transform`,children:(0,t.jsx)(s,{className:"w-6 h-6"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:e.stats}),(0,t.jsx)("span",{className:"text-blue-600 dark:text-blue-400 text-sm font-medium group-hover:translate-x-1 transition-transform",children:"Ouvrir →"})]})]},e.title)})})]})]}):null}function b({title:e,value:r,change:s}){let i=s.startsWith("+");return(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:e}),(0,t.jsxs)("div",{className:"flex items-end justify-between",children:[(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:r}),(0,t.jsx)("span",{className:`text-sm font-medium ${i?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:s})]})]})}e.s(["default",()=>f],48273)}]);